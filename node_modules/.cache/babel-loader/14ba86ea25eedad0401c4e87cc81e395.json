{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Form,Icon,Input,Button,message}from'antd';import{Link}from'react-router-dom';import{API_ROOT}from'../constants';var NormalLoginForm=/*#__PURE__*/function(_React$Component){_inherits(NormalLoginForm,_React$Component);var _super=_createSuper(NormalLoginForm);function NormalLoginForm(){var _this;_classCallCheck(this,NormalLoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleSubmit=function(e){e.preventDefault();_this.props.form.validateFields(function(err,values){if(!err){console.log('Received values of form: ',values);fetch(\"\".concat(API_ROOT,\"/login\"),{method:'POST',body:JSON.stringify({username:values.username,password:values.password})}).then(function(response){if(response.ok){return response.text();}throw new Error(response.stateText);}).then(function(data){console.log(data);_this.props.handleLoginSucceed(data);message.success('Login succeed!');}).catch(function(err){console.error(err);message.error('Login failed.');});}});};return _this;}_createClass(NormalLoginForm,[{key:\"render\",value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;return/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit,className:\"login-form\"},/*#__PURE__*/React.createElement(Form.Item,null,getFieldDecorator('username',{rules:[{required:true,message:'Please input your username!'}]})(/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(Icon,{type:\"user\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Username\"}))),/*#__PURE__*/React.createElement(Form.Item,null,getFieldDecorator('password',{rules:[{required:true,message:'Please input your Password!'}]})(/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(Icon,{type:\"lock\",style:{color:'rgba(0,0,0,.25)'}}),type:\"password\",placeholder:\"Password\"}))),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\"},\"Log in\"),\"Or \",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"register now!\")));}}]);return NormalLoginForm;}(React.Component);export var Login=Form.create({name:'normal_login'})(NormalLoginForm);","map":{"version":3,"sources":["C:/Users/jiang/Desktop/around/around-web/src/components/Login.js"],"names":["React","Form","Icon","Input","Button","message","Link","API_ROOT","NormalLoginForm","handleSubmit","e","preventDefault","props","form","validateFields","err","values","console","log","fetch","method","body","JSON","stringify","username","password","then","response","ok","text","Error","stateText","data","handleLoginSucceed","success","catch","error","getFieldDecorator","rules","required","color","Component","Login","create","name"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Icon, Input, Button, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { API_ROOT } from '../constants';\r\n\r\nclass NormalLoginForm extends React.Component {\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                console.log('Received values of form: ', values);\r\n                fetch(`${API_ROOT}/login`, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify({\r\n                        username: values.username,\r\n                        password: values.password,\r\n                    }),\r\n                })\r\n                    .then((response) => {\r\n                        if (response.ok) {\r\n                            return response.text();\r\n                        }\r\n                        throw new Error(response.stateText);\r\n                    })\r\n                    .then((data) => {\r\n                        console.log(data);\r\n                        this.props.handleLoginSucceed(data);\r\n                        message.success('Login succeed!');\r\n                    })\r\n                    .catch((err) => {\r\n                        console.error(err);\r\n                        message.error('Login failed.');\r\n                    });\r\n            }\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        return (\r\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                <Form.Item>\r\n                    {getFieldDecorator('username', {\r\n                        rules: [{ required: true, message: 'Please input your username!' }],\r\n                    })(\r\n                        <Input\r\n                            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                            placeholder=\"Username\"\r\n                        />,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('password', {\r\n                        rules: [{ required: true, message: 'Please input your Password!' }],\r\n                    })(\r\n                        <Input\r\n                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                        />,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                        Log in\r\n                    </Button>\r\n                    Or <Link to=\"/register\">register now!</Link>\r\n                </Form.Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport const Login = Form.create({ name: 'normal_login' })(NormalLoginForm);"]},"metadata":{},"sourceType":"module"}