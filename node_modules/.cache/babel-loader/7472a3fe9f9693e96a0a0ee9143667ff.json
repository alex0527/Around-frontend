{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\jiang\\\\Desktop\\\\around\\\\around-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Form,Input,Button,message}from'antd';import{Link}from'react-router-dom';import{API_ROOT}from'../constants';var RegistrationForm=/*#__PURE__*/function(_React$Component){_inherits(RegistrationForm,_React$Component);var _super=_createSuper(RegistrationForm);function RegistrationForm(){var _this;_classCallCheck(this,RegistrationForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={confirmDirty:false,autoCompleteResult:[]};_this.handleSubmit=function(e){e.preventDefault();_this.props.form.validateFields(function(err,values){if(!err){console.log('Received values of form: ',values);fetch(\"\".concat(API_ROOT,\"/signup\"),{method:'POST',body:JSON.stringify({username:values.username,password:values.password})}).then(function(response){if(response.ok){return response.text();}throw new Error(response.statusText);}).then(function(data){console.log(data);message.success('Registration succeed!');_this.props.history.push('/login');}).catch(function(err){console.error(err);message.error('Registration failed.');});}});};_this.handleConfirmBlur=function(e){var value=e.target.value;_this.setState({confirmDirty:_this.state.confirmDirty||!!value});};_this.compareToFirstPassword=function(rule,value,callback){var form=_this.props.form;if(value&&value!==form.getFieldValue('password')){callback('Two passwords that you enter is inconsistent!');}else{callback();}};_this.validateToNextPassword=function(rule,value,callback){var form=_this.props.form;if(value&&_this.state.confirmDirty){form.validateFields(['confirm'],{force:true});}callback();};return _this;}_createClass(RegistrationForm,[{key:\"render\",value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;var formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};var tailFormItemLayout={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{onSubmit:this.handleSubmit,className:\"register\"}),/*#__PURE__*/React.createElement(Form.Item,{label:\"Username\"},getFieldDecorator('username',{rules:[{required:true,message:'Please input your username!'}]})(/*#__PURE__*/React.createElement(Input,null))),/*#__PURE__*/React.createElement(Form.Item,{label:\"Password\",hasFeedback:true},getFieldDecorator('password',{rules:[{required:true,message:'Please input your password!'},{validator:this.validateToNextPassword}]})(/*#__PURE__*/React.createElement(Input.Password,null))),/*#__PURE__*/React.createElement(Form.Item,{label:\"Confirm Password\",hasFeedback:true},getFieldDecorator('confirm',{rules:[{required:true,message:'Please confirm your password!'},{validator:this.compareToFirstPassword}]})(/*#__PURE__*/React.createElement(Input.Password,{onBlur:this.handleConfirmBlur}))),/*#__PURE__*/React.createElement(Form.Item,tailFormItemLayout,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\"},\"Register\"),/*#__PURE__*/React.createElement(\"p\",null,\"I already have an account, go back to \",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"login\"))));}}]);return RegistrationForm;}(React.Component);export var Register=Form.create({name:'register'})(RegistrationForm);","map":{"version":3,"sources":["C:/Users/jiang/Desktop/around/around-web/src/components/Register.js"],"names":["React","Form","Input","Button","message","Link","API_ROOT","RegistrationForm","state","confirmDirty","autoCompleteResult","handleSubmit","e","preventDefault","props","form","validateFields","err","values","console","log","fetch","method","body","JSON","stringify","username","password","then","response","ok","text","Error","statusText","data","success","history","push","catch","error","handleConfirmBlur","value","target","setState","compareToFirstPassword","rule","callback","getFieldValue","validateToNextPassword","force","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","rules","required","validator","Component","Register","create","name"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Input, Button, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { API_ROOT } from '../constants';\r\n\r\nclass RegistrationForm extends React.Component {\r\n    state = {\r\n        confirmDirty: false,\r\n        autoCompleteResult: [],\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                console.log('Received values of form: ', values);\r\n                fetch(`${API_ROOT}/signup`, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify({\r\n                        username: values.username,\r\n                        password: values.password,\r\n                    }),\r\n                })\r\n                    .then((response) => {\r\n                        if (response.ok) {\r\n                            return response.text();\r\n                        }\r\n                        throw new Error(response.statusText);\r\n                    })\r\n                    .then((data) => {\r\n                        console.log(data);\r\n                        message.success('Registration succeed!');\r\n                        this.props.history.push('/login');\r\n                    })\r\n                    .catch((err) => {\r\n                        console.error(err);\r\n                        message.error('Registration failed.');\r\n                    });\r\n            }\r\n        });\r\n    };\r\n\r\n    handleConfirmBlur = e => {\r\n        const { value } = e.target;\r\n        this.setState({ confirmDirty: this.state.confirmDirty || !!value });\r\n    };\r\n\r\n    compareToFirstPassword = (rule, value, callback) => {\r\n        const { form } = this.props;\r\n        if (value && value !== form.getFieldValue('password')) {\r\n            callback('Two passwords that you enter is inconsistent!');\r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    validateToNextPassword = (rule, value, callback) => {\r\n        const { form } = this.props;\r\n        if (value && this.state.confirmDirty) {\r\n            form.validateFields(['confirm'], { force: true });\r\n        }\r\n        callback();\r\n    };\r\n\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 8 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 16 },\r\n            },\r\n        };\r\n        const tailFormItemLayout = {\r\n            wrapperCol: {\r\n                xs: {\r\n                    span: 24,\r\n                    offset: 0,\r\n                },\r\n                sm: {\r\n                    span: 16,\r\n                    offset: 8,\r\n                },\r\n            },\r\n        };\r\n\r\n        return (\r\n            <Form {...formItemLayout} onSubmit={this.handleSubmit} className=\"register\">\r\n                <Form.Item\r\n                    label=\"Username\"\r\n                >\r\n                    {getFieldDecorator('username', {\r\n                        rules: [{ required: true, message: 'Please input your username!' }],\r\n                    })(<Input />)}\r\n                </Form.Item>\r\n                <Form.Item label=\"Password\" hasFeedback>\r\n                    {getFieldDecorator('password', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input your password!',\r\n                            },\r\n                            {\r\n                                validator: this.validateToNextPassword,\r\n                            },\r\n                        ],\r\n                    })(<Input.Password />)}\r\n                </Form.Item>\r\n                <Form.Item label=\"Confirm Password\" hasFeedback>\r\n                    {getFieldDecorator('confirm', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: 'Please confirm your password!',\r\n                            },\r\n                            {\r\n                                validator: this.compareToFirstPassword,\r\n                            },\r\n                        ],\r\n                    })(<Input.Password onBlur={this.handleConfirmBlur} />)}\r\n                </Form.Item>\r\n                <Form.Item {...tailFormItemLayout}>\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Register\r\n                    </Button>\r\n                    <p>I already have an account, go back to <Link to=\"/login\">login</Link></p>\r\n                </Form.Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport const Register = Form.create({ name: 'register' })(RegistrationForm);\r\n"]},"metadata":{},"sourceType":"module"}